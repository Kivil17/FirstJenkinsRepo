pipeline {
    
    parameters {
        string(name: 'folderName', defaultValue: 'Nuova Cartella', description: 'folder name to create or access to it')
        booleanParam(name: 'createFolder', defaultValue: false, description: 'true if the folder is not created yet')
    }

    agent  any

    stages {
        stage("Upload") {
            script {
                def inputFile = input message: 'Upload file', parameters: [file(name: 'data.zip')]
                new hudson.FilePath(new File("$workspace/data.zip")).copyFrom(inputFile)
                inputFile.delete()
            }
        }
        stage('Plan') {
            steps{
                script {
                    if (createFolder) {
                        echo 'create folder: ${folderName}'
                        sh 'pwd;mkdir ${folderName}'
                    }
                    echo 'create file into folder: ${folderName}'
                    sh 'pwd;cd ${folderName}'
                    sh 'pwd;cp ${file}'
                }
            }
        }
    }
}
